# Simple-Segmentation-Toolkit
A Python toolkit for the image segmentation workflow (labeling, mask generation, mask-to-JSON), specialized for medical images like OCT scans.

![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

A complete Python toolkit with a user-friendly GUI for creating, managing, and converting image segmentation annotations. While versatile, this suite of tools was designed with a focus on medical imaging, particularly for annotating OCT (Optical Coherence Tomography) scans. It provides a full workflow for manual labeling, generating training masks, and converting existing masks back into an editable format.

---

## Table of Contents
- [Overview](#overview)
- [Key Features](#key-features)
- [The Workflow](#the-workflow)
- [Components](#components)
  - [1. The Labeling App](#1-the-labeling-app)
  - [2. Mask Generator (JSON to Mask)](#2-mask-generator-json-to-mask)
  - [3. JSON Generator (Mask to JSON)](#3-json-generator-mask-to-json)
- [Setup and Installation](#setup-and-installation)
- [How to Run](#how-to-run)

## Overview

This project solves a common problem in computer vision: the need for a simple, end-to-end pipeline for creating segmentation data. It consists of three interconnected GUI applications built with Python and Tkinter that allow you to:

1.  Draw annotations (rectangles, lines, freehand polygons) on images and save them as clean, individual JSON files.
2.  Convert these JSON annotations into segmentation mask images for training AI models.
3.  Reverse the process by converting existing mask images back into editable JSON annotations.

This creates a complete cycle, allowing for easy data creation, verification, and modification.

## Key Features

- **Interactive Image Labeling**: A feature-rich GUI with intuitive controls for easy and precise annotation. Features include smooth panning and zooming, robust annotation management (select & delete single items, clear all for an image), and simple navigation.
- **Multiple Annotation Shapes**: Supports rectangles, lines, and freehand polygons.
- **Flexible Data Management**: Saves annotations to a separate `.json` file for each image, keeping your data organized and portable.
- **Mask Generation**: Automatically creates segmentation masks from your JSON files, with class labels mapped to different pixel values.
- **Reverse Conversion**: Converts existing masks back into the project's JSON format, allowing you to import data from other sources or edit previously generated masks.
- **User-Friendly GUIs**: All tools are graphical, requiring no command-line interaction.
- **Safe and Robust**: Includes features like a "save on exit" prompt and clean data management to prevent accidental work loss.

## The Workflow

The toolkit is designed to support a full annotation lifecycle:

1.  **`label.py`**: Open a folder of images and draw your annotations. The app saves your work as `.json` files in a `json_data` subfolder.
2.  **`create_mask_from_json.py`**: Point this script to your `json_data` folder to generate segmentation masks (e.g., `_mask.png` files) for training a model.
3.  **`mask_to_json.py`**: If you have existing masks, use this script to convert them back into the `.json` format, which you can then open folder of `.json` load and edit in the main labeling app.

## Components

### 1. The Labeling App

**(File: `label.py`)**

This is the core application for manual annotation. It allows you to open a directory of images and draw labeled shapes.

* ![image](https://github.com/user-attachments/assets/b54105e9-7bd6-4cd4-9940-7608370ae093) ![image](https://github.com/user-attachments/assets/e26c2355-494a-4d8d-b526-0f0c86ed1018)



### 2. Mask Generator (JSON to Mask)

**(File: `create_mask_from_json.py`)**

This tool takes the `json_data` directory generated by the labeling app and produces visual segmentation masks, ready for use in a machine learning pipeline.

* ![image](https://github.com/user-attachments/assets/6b0fbc73-7bb5-41b7-8005-5465e849ef48)


### 3. JSON Generator (Mask to JSON)

**(File: `mask_to_json.py`)**

This utility performs the reverse operation. It takes a folder of mask images and, based on a user-defined mapping of pixel values to labels, generates `.json` files compatible with the labeling app.

* ![image](https://github.com/user-attachments/assets/30b2e09a-aeb1-4caf-a4ec-cca788c7d07c)


## Setup and Installation

This project is built with standard Python libraries.

## ðŸ“¦ Prerequisites

- **PythonÂ 3.10.8**  
- `git`, `pip`
  
## ðŸ”§ Installation

```bash
# 1) Clone this repo and enter it
git clone https://github.com/Araf01/Simple-Segmentation-Toolkit
cd Simple-Segmentation-Toolkit

# 2) Create & activate a PythonÂ 3.10.8 virtual environment
python3.10 -m venv .venv

# macOS/Linux:
source .venv/bin/activate
# Windows (PowerShell):
.venv\Scripts\Activate.ps1

# 3) Upgrade pip & install dependencies
pip install --upgrade pip
pip install -r requirements.txt
```

## How to Run

Navigate to the project directory and run any of the scripts using Python.

**To run the main labeling app:**
```bash
python label.py
